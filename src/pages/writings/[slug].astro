---
import { getCollection, render } from "astro:content";
import Prose from "~/components/prose.astro";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
    const writings = await getCollection("writings");
    return writings.map((writing) => ({
        params: { slug: writing.data.slug },
        props: { writing },
    }));
}
const { writing } = Astro.props;
const { Content } = await render(writing);

import RootLayout from "~/layouts/root-layout.astro";

// Format date for display
const formattedDate = writing.data.pubDate
    ? new Date(writing.data.pubDate).toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric",
      })
    : null;
---

<RootLayout minimal={true}>
    <header class="not-prose py-12 flex flex-col gap-2">
        <hgroup class="flex flex-col gap-2">
            <h2
                class="text-3xl md:text-4xl text-ink font-display font-semibold leading-tight"
            >
                {writing.data.title}
            </h2>

            <p
                class="text-base md:text-lg text-ink/70 font-serif italic mb-3"
                hidden={!writing.data.description}
            >
                {writing.data.description}
            </p>
        </hgroup>

        <time
            datetime={writing.data.pubDate?.toISOString()}
            class="text-sm text-ink/50 font-sans"
            hidden={!formattedDate}
        >
            {formattedDate}
        </time>
    </header>

    <Prose>
        <Content />
    </Prose>

    <footer class="not-prose py-8 flex justify-center text-ink/50">
        <span class="text-3xl">&lowast;</span>
    </footer>
</RootLayout>
